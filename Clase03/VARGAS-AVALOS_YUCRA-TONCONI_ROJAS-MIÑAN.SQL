
-- 1. CUANDO SE CREARON LOS OBJETOS SE CREO AUTOMATICAMENTE EL ESQUEMA
-- 2. SE EJECUTO EL PROCEDIMIENTO DEL PROFESOR
--3 .

CONN / AS SYSDBA;

CREATE USER EUREKA_QUERY
IDENTIFIED BY 123456;

GRANT CONNECT TO EUREKA_QUERY;

CONN EUREKA/123456;


BEGIN
    FOR t IN (SELECT * FROM DBA_tables WHERE OWNER='EUREKA') 
    LOOP   
        EXECUTE IMMEDIATE 'GRANT SELECT ON EUREKA.' || t.table_name || ' TO EUREKA_QUERY';    
    END LOOP;
END;

--4.

CONN / AS SYSDBA;

CREATE USER EUREKA_EXECUTE
IDENTIFIED BY 123456;

GRANT CONNECT TO EUREKA_EXECUTE;

CONN EUREKA/123456;

GRANT EXECUTE ON EUREKA.usp_egcc_deposito TO EUREKA_EXECUTE;

BEGIN
    FOR t IN (SELECT * FROM DBA_tables WHERE OWNER='EUREKA') 
    LOOP   
        EXECUTE IMMEDIATE 'GRANT SELECT ON EUREKA.' || t.table_name || ' TO EUREKA_QUERY';    
    END LOOP;
END;

--5. PRUEBAS